<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>BuonBanVat SDK Test</title>
  <!-- Load Pi SDK -->
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>

  <script>
    // Gá»i init ngay sau khi load SDK
    window.onload = function () {
      Pi.init({
        version: "2.0",
        sandbox: true
      });
    };

    function loginWithPi() {
      Pi.authenticate(['username'], function(auth) {
        alert("ÄÄƒng nháº­p thÃ nh cÃ´ng: " + JSON.stringify(auth));
      }, function(err) {
        alert("Lá»—i Ä‘Äƒng nháº­p: " + err);
      });
    }

    function testPayment() {
      const paymentData = {
        amount: 0.01,
        memo: "Test payment for BuonBanVat",
        metadata: { purpose: "test", app: "BuonBanVat" },
        sandbox: true
      };

      Pi.createPayment(paymentData, {
        onReadyForServerApproval: function(paymentId) {
          alert("Server cáº§n duyá»‡t: " + paymentId);
        },
        onReadyForServerCompletion: function(paymentId, txid) {
          alert("Giao dá»‹ch thÃ nh cÃ´ng. TXID: " + txid);
        },
        onCancel: function(paymentId) {
          alert("NgÆ°á»i dÃ¹ng Ä‘Ã£ há»§y: " + paymentId);
        },
        onError: function(error, paymentId) {
          alert("Lá»—i rá»“i: " + error);
        }
      });
    }
  </script>
</head>
<body>
  <h1>ğŸ›’ BuonBanVat SDK Test</h1>
  <p>ChÃ o má»«ng Ä‘áº¿n vá»›i báº£n thá»­ nghiá»‡m chá»©c nÄƒng thanh toÃ¡n Pi.</p>

  <button onclick="loginWithPi()">Login with Pi</button>
  <button onclick="testPayment()">ğŸ’³ Thanh toÃ¡n thá»­ 0.01 Pi</button>

  <p>ğŸ§ª ÄÃ¢y chá»‰ lÃ  phiÃªn báº£n test <strong>Sandbox</strong>. KhÃ´ng cÃ³ Pi thá»±c sá»± Ä‘Æ°á»£c chuyá»ƒn.</p>
</body>
</html>
