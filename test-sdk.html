<!DOCTYPE html>
<html>
  <head>
    <title>Test Pi SDK - Tranmusickingdom</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
  </head>
  <body>
    <h2>ğŸ§ª Test SDK Pi App â€“ Tranmusickingdom</h2>
    <button onclick="login()">ğŸ” ÄÄƒng nháº­p Pi</button>
    <button onclick="pay()">ğŸ’¸ Thanh toÃ¡n 0.01 Pi</button>

    <script>
      // Khá»Ÿi táº¡o SDK (khÃ´ng dÃ¹ng sandbox, Ä‘á»ƒ test thanh toÃ¡n tháº­t)
      Pi.init({ version: "2.0" });

      // ÄÄƒng nháº­p
      function login() {
        Pi.authenticate(['username'], function(auth) {
          console.log('ÄÄƒng nháº­p thÃ nh cÃ´ng:', auth);
          alert("âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng: " + auth.user.username);
        }, function(error) {
          console.error('Lá»—i Ä‘Äƒng nháº­p:', error);
          alert("âŒ Lá»—i Ä‘Äƒng nháº­p: " + error);
        });
      }

      // Thanh toÃ¡n 0.01 Pi
      function pay() {
        const paymentData = {
          amount: 0.01,
          memo: "Test for Tranmusickingdom",
          metadata: { purpose: "test", app: "Tranmusickingdom" }
        };

        Pi.createPayment(paymentData, {
          onReadyForServerApproval: function(paymentId) {
            console.log("Ready for server approval", paymentId);
            // KhÃ´ng cÃ³ backend â†’ bá» qua
          },
          onReadyForServerCompletion: function(paymentId, txid) {
            console.log("Ready for server completion", paymentId, txid);
            // KhÃ´ng cÃ³ backend â†’ bá» qua
          },
          onCancel: function(paymentId) {
            console.log("NgÆ°á»i dÃ¹ng há»§y", paymentId);
            alert("âŒ NgÆ°á»i dÃ¹ng Ä‘Ã£ huá»· giao dá»‹ch.");
          },
          onError: function(error, payment) {
            console.error("Lá»—i:", error);
            alert("âš ï¸ Lá»—i giao dá»‹ch: " + error);
          }
        });
      }
    </script>
  </body>
</html>
