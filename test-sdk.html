<!DOCTYPE html>
<html>
<head>
  <title>Tranmusickingdom SDK Test</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <h1>ğŸ¶ Tranmusickingdom SDK Test</h1>
  <button onclick="login()">ÄÄƒng nháº­p</button>
  <button onclick="pay()">Test thanh toÃ¡n</button>

  <script>
    Pi.init({ version: "2.0", sandbox: false });

    async function login() {
      try {
        const user = await Pi.authenticate(["username"], onIncomplete);
        alert("âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng: " + user.username);
        console.log("User:", user);
      } catch (error) {
        alert("âŒ Lá»—i Ä‘Äƒng nháº­p: " + error);
        console.error(error);
      }
    }

    async function pay() {
      const paymentData = {
        amount: 0.01,
        memo: "Test for Tranmusickingdom",
        metadata: { app: "Tranmusickingdom", purpose: "test" }
      };

      Pi.createPayment(paymentData, {
        onReadyForServerApproval: function (paymentId) {
          alert("âœ… Giao dá»‹ch Ä‘Ã£ táº¡o: " + paymentId);
          console.log("onReadyForServerApproval", paymentId);

          // ğŸ‘‰ KhÃ´ng cÃ³ backend, chá»‰ log ra. Náº¿u cÃ³ server, báº¡n cáº§n gá»i API duyá»‡t á»Ÿ Ä‘Ã¢y.
        },
        onReadyForServerCompletion: function (paymentId, txid) {
          alert("ğŸ“¦ Giao dá»‹ch hoÃ n táº¥t: " + txid);
          console.log("onReadyForServerCompletion", txid);
        },
        onCancel: function (paymentId) {
          alert("âŒ Giao dá»‹ch bá»‹ huá»·.");
          console.log("onCancel", paymentId);
        },
        onError: function (error) {
          alert("ğŸš« Lá»—i: " + error);
          console.error(error);
        }
      });
    }

    function onIncomplete(paymentId) {
      alert("âš ï¸ Pi chÆ°a hoÃ n táº¥t bÆ°á»›c xÃ¡c minh!");
    }
  </script>
</body>
</html>
