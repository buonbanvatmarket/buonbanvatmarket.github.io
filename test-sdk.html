<!DOCTYPE html>
<html>
<head>
  <title>Test Pi SDK - BuonBanVat</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <h2>ğŸ’  Test Pi App â€“ BuonBanVat</h2>
  <button onclick="login()">ğŸ” ÄÄƒng nháº­p Pi</button>
  <button onclick="pay()">ğŸ’¸ Thanh toÃ¡n 0.01 Pi</button>

  <script>
    // Khá»Ÿi táº¡o SDK
    Pi.init({ version: "2.0" });

    // ÄÄƒng nháº­p
    function login() {
      Pi.authenticate(
        { username: true },
        function(auth) {
          console.log("âœ… ÄÄƒng nháº­p thÃ nh cÃ´ng:", auth);
          alert("ğŸŸ¢ ÄÄƒng nháº­p OK: " + auth.user.username);
        },
        function(error) {
          console.error("âŒ Lá»—i Ä‘Äƒng nháº­p:", error);
          alert("ğŸ”´ Lá»—i Ä‘Äƒng nháº­p: " + error);
        }
      );
    }

    // Thanh toÃ¡n
    function pay() {
      const paymentData = {
        amount: 0.01,
        memo: "Test payment by BuonBanVat",
        metadata: { purpose: "test", app: "BuonBanVat" }
      };

      Pi.createPayment(paymentData,
        {
          // Sau khi ngÆ°á»i dÃ¹ng xÃ¡c nháº­n vÃ  Pi Server duyá»‡t
          onReadyForServerApproval: function(paymentId) {
            console.log("ğŸ“ Server approval required:", paymentId);
            // Tráº£ vá» OK ngay náº¿u khÃ´ng cÃ³ backend (test cháº¿ Ä‘á»™ Ä‘Æ¡n giáº£n)
            Pi.approvePayment(paymentId);
          },

          // Sau khi Pi server xÃ¡c nháº­n thanh toÃ¡n Ä‘Ã£ hoÃ n táº¥t
          onReadyForServerCompletion: function(paymentId, txid) {
            console.log("âœ… Transaction completed:", txid);
            alert("ğŸ‰ Giao dá»‹ch thÃ nh cÃ´ng! MÃ£ TX: " + txid);
            Pi.completePayment(paymentId);
          },

          onCancel: function(paymentId) {
            console.log("âŒ NgÆ°á»i dÃ¹ng huá»·:", paymentId);
            alert("â›” Giao dá»‹ch bá»‹ huá»·.");
          },

          onError: function(error, payment) {
            console.error("âš ï¸ Lá»—i:", error);
            alert("ğŸ›‘ Giao dá»‹ch lá»—i: " + error);
          }
        }
      );
    }
  </script>
</body>
</html>
I love Rua
